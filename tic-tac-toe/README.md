# 安装

本项目基于 create-react-app

```
yarn add enzyme enzyme-adapter-react-16 --dev
```

本项目是react官方文档教程的教学代码,写的是一个井字棋
你可以使用`npm run start`启动来玩一下


# 测试用例

先启动项目看看效果,如果你懒的话可以通过[这个](https://codepen.io/gaearon/pen/gWWZgR?editors=0010)预览

我们先不看代码,以黑盒测试的角度测这个组件,首先列出主要测试用例

1. 第一个棋子是X,棋子是`X`,`O`轮流变化的
2. 用户点击棋盘某个地方,如果这个地方没有棋子就下一个棋子
3. 如果有X棋子垂直,水平或斜方向凑成3个则该类棋子胜利,页面应展示胜利`Winner: X`

右边的Go to按钮组就先不测了



# 前端单元测试

以前写后端的单元测试的时候我只需要关注函数的参数和返回值
而前端可以测的东西还挺多的,你的输入不仅是那扩展中用逗号隔开的变量,还有各种事件(事件可能来自用户,计时器,请求回调等).输出也变得复杂,基本上都是嵌套的Viral Dom对象,除了Dom结构你甚至可能要关注它在浏览器中的真实呈现.

不得不说,前端的测试成本是很高的,首先它不是简单的数据,是复杂的呈现,可以测的东西很多.其次实际开发中界面的变化大,这点我不用解释大家都知道.




# 参考

## 什么场景适合端到端(e2e)测试?

> 和单元测试／集成测试相比，E2E测试可以用更少的代码覆盖更多的测试场景，代价则是测试的细致程度不足。  
> **需要注意的是：不是所有项目都适合写E2E测试**，以下几点可以帮助你判断自己的项目适不适用E2E测试。  
> 项目周期长。编写E2E测试会消耗不少时间和精力，如果不是长期维护的项目没必要进行这些投入。  
> 项目迭代频率高。如果迭代间隔非常长，有充足的测试时间和人手，那么细致的手动界面测试会更加可靠。  
> 页面结构稳定。E2E测试一般依靠css/xpath选择器作为定位元素的方法，如果页面的dom解构经常变更，那么维护测试用例的成本会上升。  
> 
> 此外在以下场景中E2E测试的效果比较好：  
> 纯静态页面，最好是连内容都不变的页面。可以通过在浏览器层面做截图，然后比较前后两个迭代版本截图的是否一致来判断变更是否破坏了页面的最终展示或者展示的改变是否和预期一致  
> 兼容性测试。如果需要测试项目在各种浏览器下的兼容性问题，可以通过E2E测试一次覆盖多个不同浏览器。  
> 交互复杂、交互步骤多。例如一个复杂的多步表单的填写，人工操作成本越大，用E2E自动完成带来的收益就越多。  
> **但是要留心，和其他测试一样，如果你的测试流程有数据写入，那么在测试结束后应该清除写入的数据，保证再次运行时又是一个一致的环境。**  
> 来源:https://segmentfault.com/q/1010000009239697
